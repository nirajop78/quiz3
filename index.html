<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stable Quiz</title>
  <style>
    :root{
      --bg:#f3f6fb; --card:#ffffff; --muted:#6b7280;
      --primary:#2563eb; --green:#16a34a; --red:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:28px; min-height:100vh; display:flex; align-items:center; justify-content:center;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg);
    }
    #app{
      width:100%; max-width:900px; background:var(--card); padding:20px; border-radius:12px;
      box-shadow:0 14px 40px rgba(15,23,42,0.06);
    }
    .header { text-align:center; margin-bottom:20px; }
    .header img { height:80px; margin-bottom:10px; }
    .header h1 { margin:0; font-size:1.8rem; color:#111827; }
    #prog{color:var(--muted); margin-bottom:8px}
    h3#q{ margin:6px 0 18px; font-size:1.25rem }
    #opts{ display:grid; gap:10px }
    .option{
      display:flex; gap:12px; align-items:center; padding:12px 14px; border-radius:10px;
      border:1px solid #e6e9ef; cursor:pointer; background:white; transition:transform .12s, box-shadow .12s;
    }
    .option:hover{ transform:translateY(-3px); box-shadow:0 8px 20px rgba(15,23,42,0.04) }
    .letter{ width:38px; height:38px; border-radius:8px; display:grid; place-items:center; font-weight:700; border:1px solid #eee }
    .option.selected{ border-color:var(--primary); box-shadow:0 8px 20px rgba(37,99,235,0.06) }
    .option.correct{ border-color:var(--green); background:rgba(16,185,129,0.06) }
    .option.wrong{ border-color:var(--red); background:rgba(239,68,68,0.06) }
    #controls{ display:flex; gap:12px; align-items:center; margin-top:14px }
    #msg{ color:var(--muted) }
    button{ padding:10px 14px; border-radius:10px; border:none; background:var(--primary); color:white; cursor:pointer; font-weight:700 }
    button.secondary{ background:transparent; color:var(--primary); border:1px solid var(--primary) }
    button:disabled{ opacity:0.5; cursor:not-allowed }
    .score{ font-size:30px; font-weight:800; margin:10px 0 }
    .center{text-align:center}
    .small{ color:var(--muted); font-size:0.95rem }
    pre#raw { max-height:240px; overflow:auto; background:#f9fafb; padding:12px; border-radius:8px; border:1px solid #eee }
  </style>
</head>
<body>
  <div id="app">
    <!-- ✅ Header with logo + Stable Quiz -->
    <div class="header">
      <img src="logo.png" alt="Stable Logo" />
      <h1>Stable Quiz</h1>
    </div>

    <div id="prog" class="small">Question 1 / 1</div>
    <h3 id="q">Question text</h3>
    <div id="opts"></div>

    <div id="controls">
      <div id="msg" class="small"></div>
      <div style="flex:1"></div>
      <button id="next" disabled>Submit</button>
    </div>
  </div>

  <script>
    // ---------------- QUESTIONS ----------------
    const questions = [
      { q: 'Which model popularized image generation using diffusion techniques and is associated with Stability AI?', opts: ['DALL·E 2','Midjourney','Stable Diffusion','BigGAN'], a: 2 },
      { q: 'What core approach does Stable Diffusion use to generate images?', opts: ['GANs','Diffusion-based denoising models','Rule-based rendering','Deterministic rasterization'], a: 1 },
      { q: 'Which programming language is commonly used to run Stable Diffusion implementations?', opts: ['Java','Python','Ruby','PHP'], a: 1 },
      { q: 'Stability AI is best known for focusing on which field?', opts: ['Quantum computing','Renewable energy','Generative AI / foundation models','Network hardware'], a: 2 },
      { q: 'Which topic caused big community conversations when Stable Diffusion released models?', opts: ['Open-source vs proprietary licensing','Hardware compatibility','Email rules','DNS configuration'], a: 0 },
      { q: 'Which of the following is a common use-case for Stable Diffusion?', opts: ['Real-time video conferencing backend','Creating AI-generated images and art','Compiling C programs','Sending encrypted messages'], a: 1 },
      { q: 'What is typically required to run Stable Diffusion locally with decent speed?', opts: ['High-end GPU (VRAM)','Only a smartphone with 1GB RAM','A fax machine','A dial-up modem'], a: 0 },
      { q: 'Who was an early public figure associated with Stability AI?', opts: ['Sam Altman','Emad Mostaque','Sundar Pichai','Mark Zuckerberg'], a: 1 },
      { q: 'Which file formats are commonly used to save images from Stable Diffusion?', opts: ['.docx','.png or .jpg','.exe','.csv'], a: 1 },
      { q: 'What technique is often used with Stable Diffusion to steer image results using plain language?', opts: ['Visual prompts only','Text prompts / prompt engineering','FTP commands','SQL queries'], a: 1 }
    ];
    // -------------------------------------------

    const progEl = document.getElementById('prog');
    const qEl = document.getElementById('q');
    const optsEl = document.getElementById('opts');
    const nextBtn = document.getElementById('next');
    const msgEl = document.getElementById('msg');

    let idx = 0, score = 0, selectedIndex = null, answered = false;
    const letters = ['A','B','C','D'];
    const responses = [];

    function loadQuestion(){
      selectedIndex = null;
      answered = false;
      nextBtn.disabled = true;
      nextBtn.textContent = 'Submit';
      msgEl.textContent = '';

      const item = questions[idx];
      progEl.textContent = `Question ${idx+1} / ${questions.length}`;
      qEl.textContent = item.q;
      optsEl.innerHTML = '';

      item.opts.forEach((opt, i) => {
        const row = document.createElement('div');
        row.className = 'option';
        row.dataset.i = i;

        const L = document.createElement('div');
        L.className = 'letter';
        L.textContent = letters[i];

        const T = document.createElement('div');
        T.textContent = opt;

        row.appendChild(L);
        row.appendChild(T);

        row.addEventListener('click', () => {
          if (answered) return;
          document.querySelectorAll('.option').forEach(n => n.classList.remove('selected'));
          row.classList.add('selected');
          selectedIndex = i;
          nextBtn.disabled = false;
        });

        optsEl.appendChild(row);
      });
    }

    nextBtn.addEventListener('click', () => {
      if (!answered) {
        if (selectedIndex === null) return;
        answered = true;
        const correct = questions[idx].a;
        const optionEls = Array.from(document.querySelectorAll('.option'));

        optionEls.forEach(o => {
          const i = +o.dataset.i;
          o.style.pointerEvents = 'none';
          if (i === correct) o.classList.add('correct');
          if (i === selectedIndex && i !== correct) o.classList.add('wrong');
        });

        const resp = {
          idx,
          q: questions[idx].q,
          selected: questions[idx].opts[selectedIndex],
          correct: questions[idx].opts[correct],
          isCorrect: selectedIndex === correct,
          ts: new Date().toISOString()
        };
        responses.push(resp);

        if (resp.isCorrect) {
          score++;
          msgEl.innerHTML = '<span style="color:var(--green);font-weight:700">✔ Correct</span>';
        } else {
          msgEl.innerHTML = '<span style="color:var(--red);font-weight:700">✖ Incorrect</span>';
        }

        nextBtn.textContent = (idx === questions.length - 1) ? 'See Results' : 'Next';
        return;
      }

      idx++;
      if (idx < questions.length) {
        loadQuestion();
      } else {
        showResults();
      }
    });

    function showResults(){
      const app = document.getElementById('app');
      const percent = Math.round((score / questions.length) * 100);
      app.innerHTML = `
        <div class="center" style="padding:18px">
          <h2>Your Score</h2>
          <div class="score">${score} / ${questions.length}</div>
          <p class="small">${percent}% correct</p>
          <div style="margin-top:18px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap">
            <button id="retry">Retry Quiz</button>
            <button id="download">Download responses (JSON)</button>
          </div>
        </div>
      `;

      document.getElementById('retry').addEventListener('click', () => {
        location.reload();
      });

      document.getElementById('download').addEventListener('click', () => {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(responses, null, 2));
        const dlAnchor = document.createElement('a');
        dlAnchor.setAttribute('href', dataStr);
        dlAnchor.setAttribute('download', 'stable-quiz-responses.json');
        document.body.appendChild(dlAnchor);
        dlAnchor.click();
        dlAnchor.remove();
      });
    }

    loadQuestion();
  </script>
</body>
</html>
